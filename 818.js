"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[818],{818:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var o=n(784),a=n(62),s=n.n(a),i=n(36),r=n.n(i),c=n(793),l=n.n(c),u=n(892),p=n.n(u),d=n(173),h=n.n(d),f=n(464),m=n.n(f),y=n(387),A={};A.styleTagTransform=m(),A.setAttributes=p(),A.insert=l().bind(null,"head"),A.domAPI=r(),A.insertStyleElement=h(),s()(y.Z,A);const b=y.Z&&y.Z.locals?y.Z.locals:void 0;function C(){const[e,t]=(0,o.useState)((()=>({delay:"5",ttl:"0"}))),[n,a]=(0,o.useState)(null);(0,o.useEffect)((()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){return e.pushManager.getSubscription().then((async function(t){if(t)return t;const n=await fetch("./vapidPublicKey"),o=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),o=new Uint8Array(n.length),a=0;a<n.length;++a)o[a]=n.charCodeAt(a);return o}(await n.text());return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:o})}))})).then((e=>a(e)))}),[]),(0,o.useEffect)((()=>{n&&fetch("./register",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({subscription:n})})}),[n]);const s=(0,o.useCallback)((e=>{const{name:n,value:o}=e.target;t((e=>({...e,[n]:o})))}),[]),i=(0,o.useCallback)((()=>{const{delay:t,ttl:o}=e;fetch("./sendNotification",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({subscription:n,delay:t,ttl:o})})}),[e,n]);return o.createElement("section",{className:b.Section},o.createElement("h2",null,"Push"),o.createElement("p",null,"This demo shows how to register for push notifications and how to send them."),o.createElement("form",null,"Notification delay:"," ",o.createElement("input",{id:"notification-delay",type:"number",name:"delay",value:e.delay,onChange:s})," ","seconds Notification Time-To-Live:"," ",o.createElement("input",{id:"notification-ttl",type:"number",name:"ttl",value:e.ttl,onChange:s})," ","seconds"),o.createElement("button",{id:"doIt",onClick:i},"Try to conquer Italy!"))}},387:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(272),a=n.n(o),s=n(609),i=n.n(s)()(a());i.push([e.id,".tjNCk8qW9Vs65hlz4WRw{color:blue;font-family:monospace;font-size:1rem;white-space:pre-wrap}","",{version:3,sources:["webpack://./src/containers/Push.module.scss"],names:[],mappings:"AAAA,sBACE,UAAA,CACA,qBAAA,CACA,cAAA,CACA,oBAAA",sourcesContent:[".Section {\n  color: blue;\n  font-family: monospace;\n  font-size: 1rem;\n  white-space: pre-wrap;\n}\n"],sourceRoot:""}]),i.locals={Section:"tjNCk8qW9Vs65hlz4WRw"};const r=i}}]);
//# sourceMappingURL=818.js.map